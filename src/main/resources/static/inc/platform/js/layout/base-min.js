(function($){Function.prototype.ligerExtend=function(a,b){if(typeof a!="function")return this;this.base=a.prototype,this.base.constructor=a;var c=function(){};c.prototype=a.prototype,this.prototype=new c,this.prototype.constructor=this,b&&$.extend(this.prototype,b)},Function.prototype.ligerDefer=function(a,b,c){var d=this;return setTimeout(function(){d.apply(a,c||[])},b)},window.liger=$.ligerui={version:"V1.1.9",managerCount:0,managers:{},managerIdPrev:"ligerui",error:{managerIsExist:"\u7ba1\u7406\u5668id\u5df2\u7ecf\u5b58\u5728"},getId:function(a){a=a||this.managerIdPrev;var b=a+(1e3+this.managerCount);return this.managerCount++,b},add:function(a){if(arguments.length==2){var b=arguments[1];b.id=b.id||b.options.id||arguments[0].id,this.addManager(b);return}a.id||(a.id=this.getId(a.__idPrev()));if(this.managers[a.id])throw new Error(this.error.managerIsExist);this.managers[a.id]=a},remove:function(a){typeof a=="string"||typeof a=="number"?delete $.ligerui.managers[a]:typeof a=="object"&&a instanceof $.ligerui.core.Component&&delete $.ligerui.managers[a.id]},get:function(a,b){return b=b||"ligeruiid",typeof a=="string"||typeof a=="number"?$.ligerui.managers[a]:typeof a=="object"&&a.length?!a[0][b]&&!$(a[0]).attr(b)?null:$.ligerui.managers[a[0][b]||$(a[0]).attr(b)]:null},find:function(a){var b=[];for(var c in this.managers){var d=this.managers[c];a instanceof Function?d instanceof a&&b.push(d):a instanceof Array?$.inArray(d.__getType(),a)!=-1&&b.push(d):d.__getType()==a&&b.push(d)}return b},run:function(a,b,c){if(!a)return;c=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},c||{}),a=a.replace(/^ligerGet/,""),a=a.replace(/^liger/,"");if(this==null||this==window||c.isStatic)return $.ligerui.plugins[a]||($.ligerui.plugins[a]={fn:$["liger"+a],isStatic:!0}),new $.ligerui[c.controlNamespace][a]($.extend({},$[c.defaultsNamespace][a]||{},$[c.defaultsNamespace][a+"String"]||{},b.length>0?b[0]:{}));$.ligerui.plugins[a]||($.ligerui.plugins[a]={fn:$.fn["liger"+a],isStatic:!1});if(/Manager$/.test(a))return $.ligerui.get(this,c.idAttrName);this.each(function(){if(this[c.idAttrName]||$(this).attr(c.idAttrName)){var d=$.ligerui.get(this[c.idAttrName]||$(this).attr(c.idAttrName));d&&b.length>0&&d.set(b[0]);return}if(b.length>=1&&typeof b[0]=="string")return;var e=b.length>0?b[0]:null,f=$.extend({},$[c.defaultsNamespace][a]||{},$[c.defaultsNamespace][a+"String"]||{},e||{});c.propertyToElemnt&&(f[c.propertyToElemnt]=this),c.hasElement?new $.ligerui[c.controlNamespace][a](this,f):new $.ligerui[c.controlNamespace][a](f)});if(this.length==0)return null;if(b.length==0)return $.ligerui.get(this,c.idAttrName);if(typeof b[0]=="object")return $.ligerui.get(this,c.idAttrName);if(typeof b[0]=="string"){var d=$.ligerui.get(this,c.idAttrName);if(d==null)return;if(b[0]!="option"){var e=b[0];if(!d[e])return;var f=Array.apply(null,b);return f.shift(),d[e].apply(d,f)}if(b.length==2)return d.get(b[1]);if(b.length>=3)return d.set(b[1],b[2])}return null},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},$.ligerui.defaults=$.ligerDefaults,$.ligerui.methods=$.ligerMethos,$.fn.liger=function(a){return a?$.ligerui.run.call(this,a,arguments):$.ligerui.get(this)},$.ligerui.core.Component=function(a){this.events=this.events||{},this.options=a||{},this.children={}},$.extend($.ligerui.core.Component.prototype,{__getType:function(){return"$.ligerui.core.Component"},__idPrev:function(){return"ligerui"},set:function(a,b){if(!a)return;if(typeof a=="object"){var c;this.options!=a?($.extend(this.options,a),c=a):c=$.extend({},a);if(b==undefined||b==1)for(var d in c)d.indexOf("on")==0&&this.set(d,c[d]);if(b==undefined||b==0)for(var d in c)d.indexOf("on")!=0&&this.set(d,c[d]);return}var e=a;if(e.indexOf("on")==0){typeof b=="function"&&this.bind(e.substr(2),b);return}this.trigger("propertychange",a,b),this.options||(this.options={}),this.options[e]=b;var f="_set"+e.substr(0,1).toUpperCase()+e.substr(1);this[f]&&this[f].call(this,b),this.trigger("propertychanged",a,b)},get:function(a){var b="_get"+a.substr(0,1).toUpperCase()+a.substr(1);return this[b]?this[b].call(this,a):this.options[a]},hasBind:function(a){var b=a.toLowerCase(),c=this.events[b];return c&&c.length?!0:!1},trigger:function(a,b){var c=a.toLowerCase(),d=this.events[c];if(!d)return;b=b||[],b instanceof Array==0&&(b=[b]);for(var e=0;e<d.length;e++){var f=d[e];if(f.handler.apply(f.context,b)==0)return!1}},bind:function(a,b,c){if(typeof a=="object"){for(var d in a)this.bind(d,a[d]);return}if(typeof b!="function")return!1;var e=a.toLowerCase(),f=this.events[e]||[];c=c||this,f.push({handler:b,context:c}),this.events[e]=f},unbind:function(a,b){if(!a){this.events={};return}var c=a.toLowerCase(),d=this.events[c];if(!d||!d.length)return;if(!b)delete this.events[c];else for(var e=0,f=d.length;e<f;e++)if(d[e].handler==b){d.splice(e,1);break}},destroy:function(){$.ligerui.remove(this)}}),$.ligerui.core.UIComponent=function(a,b){$.ligerui.core.UIComponent.base.constructor.call(this,b);var c=this._extendMethods();c&&$.extend(this,c),this.element=a,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},$.ligerui.core.UIComponent.ligerExtend($.ligerui.core.Component,{__getType:function(){return"$.ligerui.core.UIComponent"},_extendMethods:function(){},_init:function(){this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||$.ligerui.getId(this.__idPrev()):this.id=this.options.id||$.ligerui.getId(this.__idPrev()),$.ligerui.add(this);if(!this.element)return;var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];this.options[name]=$(this.element).attr(name)}var p=this.options;if($(this.element).attr("ligerui"))try{var attroptions=$(this.element).attr("ligerui");attroptions.indexOf("{")!=0&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,$.ligerui.remove(this)}}),$.ligerui.controls.Input=function(a,b){$.ligerui.controls.Input.base.constructor.call(this,a,b)},$.ligerui.controls.Input.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Input"},attr:function(){return["nullText"]},setValue:function(a){return this.set("value",a)},getValue:function(){return this.get("value")},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){}}),$.ligerui.win={top:!1,mask:function(a){function b(){if(!$.ligerui.win.windowMask)return;var a=$(window).height()+$(window).scrollTop();$.ligerui.win.windowMask.height(a)}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",b),$(window).bind("scroll",b)),this.windowMask.show(),b(),this.masking=!0},unmask:function(a){var b=$("body > .l-dialog:visible,body > .l-window:visible");for(var c=0,d=b.length;c<d;c++){var e=b.eq(c).attr("ligeruiid");if(a&&a.id==e)continue;var f=$.ligerui.get(e);if(!f)continue;var g=f.get("modal");if(g)return}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var a=this;a.taskbar.animate({bottom:-32},function(){a.taskbar.remove(),a.taskbar=null})},activeTask:function(a){for(var b in this.tasks){var c=this.tasks[b];b==a.id?c.addClass("l-taskbar-task-active"):c.removeClass("l-taskbar-task-active")}},getTask:function(a){var b=this;if(!b.taskbar)return;return b.tasks[a.id]?b.tasks[a.id]:null},addTask:function(a){var b=this;b.taskbar||b.createTaskbar();if(b.tasks[a.id])return b.tasks[a.id];var c=a.get("title"),d=b.tasks[a.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+c+"</div></div>");return b.taskbar.tasks.append(d),b.activeTask(a),d.bind("click",function(){b.activeTask(a),a.actived?a.min():a.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),d},hasTask:function(){for(var a in this.tasks)if(this.tasks[a])return!0;return!1},removeTask:function(a){var b=this;if(!b.taskbar)return;b.tasks[a.id]&&(b.tasks[a.id].unbind(),b.tasks[a.id].remove(),delete b.tasks[a.id]),b.hasTask()||b.removeTaskbar()},setFront:function(a){var b=$.ligerui.find($.ligerui.core.Win);for(var c in b){var d=b[c];d==a?($(d.element).css("z-index","9200"),this.activeTask(d)):$(d.element).css("z-index","9100")}}},$.ligerui.core.Win=function(a,b){$.ligerui.core.Win.base.constructor.call(this,a,b)},$.ligerui.core.Win.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Win"},mask:function(){this.options.modal&&$.ligerui.win.mask(this)},unmask:function(){this.options.modal&&$.ligerui.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),$.ligerui.draggable={dragging:!1},$.ligerui.resizable={reszing:!1},$.ligerui.toJSON=typeof JSON=="object"&&JSON.stringify?JSON.stringify:function(a){var b=function(a){return a<10?"0"+a:a},c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d=function(a){return c.lastIndex=0,c.test(a)?'"'+a.replace(c,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'};if(a===null)return"null";var e=typeof a;if(e==="undefined")return undefined;if(e==="string")return d(a);if(e==="number"||e==="boolean")return""+a;if(e==="object"){if(typeof a.toJSON=="function")return $.ligerui.toJSON(a.toJSON());if(a.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null;var f=[];if(a.constructor===Array){for(var g=0,h=a.length;g<h;g++)f.push($.ligerui.toJSON(a[g])||"null");return"["+f.join(",")+"]"}var i,j;for(var k in a){e=typeof k;if(e==="number")i='"'+k+'"';else{if(e!=="string")continue;i=d(k)}e=typeof a[k];if(e==="function"||e==="undefined")continue;j=$.ligerui.toJSON(a[k]),f.push(i+":"+j)}return"{"+f.join(",")+"}"}}})(jQuery)